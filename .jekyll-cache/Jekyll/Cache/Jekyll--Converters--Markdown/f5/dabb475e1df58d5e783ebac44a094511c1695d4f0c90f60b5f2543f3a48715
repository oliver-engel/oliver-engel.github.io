I"•[<h4>Background</h4>
<p>Iâ€™ve been learning how to use Jekyll for my new website, and ended up building a custom image gallery for <a href="https://oliverengel.com/play/photo">my photography</a>. I knew I wanted something heavily inspired by <a href="https://wells-demo.squarespace.com/">Squarespaceâ€™s Wells gallery</a>, and also didnâ€™t need to bother with captions for each image. Letâ€™s get to it.</p>

<h4>Quick Demo</h4>
<p>Hereâ€™s what weâ€™re going to make:</p>

<video class="blog-video" loop="" muted="" autoplay="">
  <source src="/assets/img/blog/jekyllgallery/demo.mp4 " type="video/mp4" />
</video>

<p>Thatâ€™s it. You can cycle forwards and backwards through a folder of images. Animations between make it a bit more complicated, so Iâ€™ll leave those out. I also wonâ€™t really touch on styling other than some basics.</p>

<h4>Setup</h4>
<p>All you need to begin is Jekyll (obviously) and a folder full of images.</p>

<p><img src="/assets/img/blog/jekyllgallery/folder.png" alt="Folder of images" /><em>Photos can be any format and have any name. Though theyâ€™ll be sorted by alphanumeric rank in the gallery.</em></p>

<h4>1. Looping with Liquid Tags</h4>
<p>So youâ€™ve got a folder full of images you want to display in the gallery. Weâ€™re going to use a <a href="https://shopify.dev/docs/themes/liquid/reference/tags">Liquid tag</a> to loop over all of those images and render them on our page.</p>

<p class="subhead code-type">HTML</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"image-gallery"</span><span class="nt">&gt;</span>
  {% for image in site.static_files %}
    {% if image.path contains '/path/to/images/' %}
      <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"{{ site.baseurl }}{{ image.path }}"</span><span class="nt">/&gt;</span>
    {% endif %}
  {% endfor %}
<span class="nt">&lt;/div&gt;</span>

</code></pre></div></div>
<p>Pretty simple: we set up a div with class <code>.image-gallery</code>, narrow in on our desired image folder, and one-by-one create images with <code>src</code> pulled from the image paths.</p>

<p>On build, that code will output to:</p>

<p class="subhead code-type">OUTPUT</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"image-gallery"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"/path/to/images/Photo-1.jpg"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"/path/to/images/Photo-2.jpg"</span><span class="nt">&gt;</span>
  ...
  <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"/path/to/images/Photo-N.jpg"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>

</code></pre></div></div>

<p>Great, now weâ€™ve got a bunch of images displayed on the page (in whatever style youâ€™ve applied to <code>.image-gallery</code>).</p>

<p><img src="/assets/img/blog/jekyllgallery/display-all.jpg" alt="display all images" /><em>Your page might look something like this.</em></p>

<h4>2. Controlling Image Visibility</h4>
<p>Now weâ€™re going to only show one image at a time, per the gallery style weâ€™re aiming for. The general technique here is: assign all images <em>except</em> the first one as <code>display:none</code> Weâ€™re using the display property because it means all the following images will not take up space on the page.</p>

<p>However, this makes animation more difficult as <code>display</code> cannot be animated with CSS alone. There are some <a href="https://www.impressivewebs.com/animate-display-block-none/">more complex workarounds</a>.</p>

<p class="subhead code-type">SCSS</p>

<div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nc">.image-gallery</span> <span class="p">{</span>
  <span class="nt">img</span><span class="nd">:first-child</span> <span class="p">{</span>
    <span class="nt">display</span><span class="nd">:block</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nt">img</span> <span class="p">{</span>
    <span class="nt">display</span><span class="nd">:none</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p><img src="/assets/img/blog/jekyllgallery/display-first-child.jpg" alt="display first child" /><em>Only the first image in the DOM will render, while all others are hidden.</em></p>

<h4>3. Set Up the Controls</h4>
<p>Letâ€™s give the user something to click on to navigate through the images. The technique Iâ€™m going to use is two interactive divs that split the page into left and right halves. Weâ€™ll assign functions to these with <code>onClick()</code>.</p>

<p><img src="/assets/img/blog/jekyllgallery/interaction-model.jpg" alt="interaction model" /><em>The left div will trigger the previous image, and the right div will trigger the next one.</em></p>

<p class="subhead code-type">HTML</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"previous"</span> <span class="na">onclick=</span><span class="s">"prevImage();"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"next"</span> <span class="na">onclick=</span><span class="s">"nextImage();"</span><span class="nt">&gt;&lt;/div&gt;</span>

</code></pre></div></div>

<p class="subhead code-type">SCSS</p>
<div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nn">#previous</span><span class="p">{</span>
  <span class="nl">z-index</span><span class="p">:</span><span class="m">1000</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">left</span><span class="p">:</span><span class="m">0px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">50vw</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span><span class="m">100vh</span><span class="p">;</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">w-resize</span><span class="p">;</span>
<span class="p">}</span>

<span class="nn">#next</span><span class="p">{</span>
  <span class="nl">z-index</span><span class="p">:</span><span class="m">1000</span><span class="p">;</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
  <span class="nl">right</span><span class="p">:</span><span class="m">0px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">50vw</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span><span class="m">100vh</span><span class="p">;</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">e-resize</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<p>Now we have two divs that each take up the half the viewport, and map to two different functions. Our last step is to write those functions.</p>

<h4>Cycling With Javascript</h4>

<p>You can probably guess where this is going: weâ€™re going to change the <code>display</code> property of the images programmatically as we cycle through them.</p>

<h5>nextImage()</h5>

<p>First weâ€™ll set up a function called <code>nextImage()</code> and create an array of all our images. We also need a variable to track which image weâ€™re showing.</p>

<p class="subhead code-type">javascript</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">var</span> <span class="nx">imgCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">nextImage</span><span class="p">(){</span>
  <span class="c1">// Get all the images into an array</span>
  <span class="kd">var</span> <span class="nx">photoArray</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">img</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<p>When we trigger <code>nextImage()</code>, we want to hide the current image and show the next one, like so:</p>

<p class="subhead code-type">javascript</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">// Change current image to display: none</span>
<span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Change next image to display: block</span>
<span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Increment imgCounter</span>
<span class="nx">imgCounter</span><span class="o">++</span><span class="p">;</span>

</code></pre></div></div>

<p>You can now cycle forward through the images. However, youâ€™ll hit a snag once you get to the last image in the folder. Letâ€™s add some code to wrap it back around to the first index once that happens.</p>

<p class="subhead code-type">javascript</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">// If our imgCounter is at the last index...</span>
<span class="k">if</span><span class="p">(</span><span class="nx">imgCounter</span> <span class="o">===</span> <span class="nx">photoArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">){</span>

  <span class="c1">// Hide the current image</span>
  <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>

  <span class="c1">// reset the counter to 0</span>
  <span class="nx">imgCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="c1">// and display the image at index 0.</span>
  <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<p>And if this is the case, we donâ€™t want to run that first block of code that increments our counter since weâ€™ve just reset it. Weâ€™ll put that in an <code>else</code> to tidy up. Tying everything all together:</p>

<p class="subhead code-type">javascript</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">var</span> <span class="nx">imgCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">nextImage</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">photoArray</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">img</span><span class="dl">'</span><span class="p">);</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">imgCounter</span> <span class="o">===</span> <span class="nx">photoArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">){</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">imgCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">else</span><span class="p">{</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">imgCounter</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

</code></pre></div></div>

<h5>previousImage()</h5>

<p>Luckily, our previous image function just needs a couple tweaks to work. Iâ€™ll give ya the code block with comments to call out the changes.</p>

<p class="subhead code-type">javascript</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">function</span> <span class="nx">previousImage</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">photoArray</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">img</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// To wrap around, catch imgCounter when it gets to index 0.</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">imgCounter</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
    <span class="c1">//...and reassign it to the last index.</span>
    <span class="nx">imgCounter</span> <span class="o">=</span> <span class="nx">photoArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">else</span><span class="p">{</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
    <span class="c1">// Go to the previous index, not the next one.</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>
    <span class="c1">// ...and decrement the counter.</span>
    <span class="nx">imgCounter</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

</code></pre></div></div>

<video class="blog-video" loop="" muted="" autoplay="">
  <source src="/assets/img/blog/jekyllgallery/demo.mp4 " type="video/mp4" />
</video>

<p>Your gallery should now behave like the demo!</p>

<h5>Full Javascript Code</h5>

<p>Hereâ€™s everything all together:</p>

<p class="subhead code-type">javascript</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">var</span> <span class="nx">imgCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">nextImage</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">photoArray</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">img</span><span class="dl">'</span><span class="p">);</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">imgCounter</span> <span class="o">===</span> <span class="nx">photoArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">){</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">imgCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">else</span><span class="p">{</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">imgCounter</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">previousImage</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">photoArray</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">img</span><span class="dl">'</span><span class="p">);</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">imgCounter</span> <span class="o">===</span> <span class="mi">0</span><span class="p">){</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">imgCounter</span> <span class="o">=</span> <span class="nx">photoArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">else</span><span class="p">{</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">photoArray</span><span class="p">[</span><span class="nx">imgCounter</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">block</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">imgCounter</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

</code></pre></div></div>
<h4>In Conclusion</h4>
<p>Thereâ€™s likely a much more streamlined way to write the Javascript portion, but Iâ€™m a pretty casual coder. And thereâ€™s likely many other ways of tackling a gallery â€“ this is just an approach that worked for me.</p>
:ET